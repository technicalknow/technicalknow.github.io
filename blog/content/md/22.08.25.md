# Connecting Your Linux Computer Through ProxyChains

Connecting your Linux computer through ProxyChains feels a bit like sending your network traffic on a scenic mystery tour: each packet hops through proxies, hiding where it started and giving you a little more privacy or the ability to reach destinations otherwise blocked. This guide walks you through installing and configuring ProxyChains (and proxychains-ng), using it with nmap for TCP scans, running a browser through the proxy, checking for DNS leaks with dnsleaktest, and notes on limitations, troubleshooting, and ethics.



### What ProxyChains does (short and sweet)
**ProxyChains forces programs that use network sockets to route their TCP connections through one or more proxies** (SOCKS4, SOCKS5, HTTP). It works by preloading a library that intercepts libc socket calls and redirects them through proxies you specify. Think of it as a virtual tour guide that steers your traffic through checkpoints before it reaches its destination.



### Install and choose the right package
On most distros you can install either the classic proxychains or the actively maintained proxychains-ng. Examples:

- Debian/Ubuntu:
```
sudo apt update
sudo apt install proxychains4
```
- Arch:
```
sudo pacman -S proxychains-ng
```
- Fedora:
```
sudo dnf install proxychains-ng
```

ProxyChains-NG (proxychains4) is recommended for newer systems; check your package manager or build from source if needed.



### Basic configuration
Edit the configuration file — commonly /etc/proxychains.conf or /etc/proxychains4.conf — as root. Key sections:

- Proxy list format at the bottom: type host port [user pass]
  - Example SOCKS5 entry:
    ```
    socks5 127.0.0.1 9050
    ```
- Proxy mode near the top:
  - dynamic_chain: try proxies in order, skip dead ones
  - strict_chain: require the full chain in exact order
  - random_chain: pick a random proxy or chain per connection

A sample minimal config:
```
[ProxyList]
# format: type host port [user pass]
socks5 127.0.0.1 9050
```
If you want Tor, install Tor and point ProxyChains to Tor’s SOCKS port (usually 127.0.0.1:9050).



### Running commands through ProxyChains
Prefix the command with proxychains (or proxychains4). Examples:
- Browser:
```
proxychains firefox
```
- Curl:
```
proxychains curl https://icanhazip.com
```
- SSH (may work if remote accepts proxied TCP):
```
proxychains ssh user@host
```

Note: ProxyChains intercepts TCP-based calls. UDP, raw sockets, and certain kernel-level traffic won’t be proxied reliably.



### Using nmap over ProxyChains — what works and what doesn’t
Nmap supports many scan types; only TCP stream scans work cleanly over SOCKS proxies. Raw packet scans (SYN scan -sS, ACK, UDP -sU, ping sweeps using raw packets) require root and direct packet sending and therefore bypass ProxyChains.

- Recommended nmap usage with ProxyChains:
```
proxychains nmap -sT -Pn target.example.com
```
- Explanation:
  - -sT: TCP connect scan (uses the OS TCP stack to open connections, so ProxyChains can intercept)
  - -Pn: skip host discovery (avoid raw pings that won’t route through the proxy)
- Limitations:
  - Timing and accuracy will be different: response times, port states, and some OS detection features may be less reliable.
  - You may see more false negatives if the proxy filters or rate-limits connections.
  - Using Tor for scanning is discouraged: Tor exit policies and network health make accurate scans unreliable and can harm the Tor network.

Always have authorization before scanning any host. Unauthorized scanning is illegal in many jurisdictions.



### Browsing via ProxyChains and checking DNS leaks
Launching a browser under ProxyChains will route its TCP requests through the configured proxy. However, browsers and system resolvers may still perform DNS queries outside the proxy unless you ensure DNS is also proxied or use a browser feature that forces DNS over HTTPS (DoH).

Steps to check DNS leakage:
1. Start your browser via ProxyChains:
```
proxychains firefox --new-instance
```
2. Visit a DNS leak test site such as dnsleaktest.com (or an equivalent).
3. Observe which DNS servers are listed.

If the test shows your real ISP’s DNS servers, you have a DNS leak. Fixes:
- Use browser DNS-over-HTTPS (Firefox: Settings → Network Settings → Enable DNS over HTTPS and pick a trusted provider).
- Use a local DNS proxy that forwards over the proxy (more advanced).
- Configure your system to use a DNS server reachable through the proxy (often tricky).

Note: ProxyChains has a "proxy_dns" setting in config — enabling it tries to resolve DNS via the proxy by intercepting gethostbyname calls. This increases the chance DNS queries go through the proxy, but it may not catch all resolver pathways (some applications use custom DNS libraries).



### Practical examples and commands
- Check your external IP via curl:
```
proxychains curl https://ifconfig.me
```
- Run an nmap TCP connect scan:
```
proxychains nmap -sT -Pn -p 22,80,443 example.com
```
- Launch Firefox and verify DNS:
```
proxychains firefox
# then visit dnsleaktest.com
```



### Troubleshooting common problems
- “Connection refused” or timeouts:
  - Verify the proxy host/port and that the proxy is running.
  - If using Tor, ensure tor service is active (systemctl status tor).
- Some apps ignore ProxyChains:
  - Apps that use custom networking stacks or kernel modules may bypass the interception. Use application-level proxy settings when available.
- DNS still leaking:
  - Enable proxy_dns in proxychains.conf and also enable DoH in the browser.
- Performance:
  - Expect higher latency. Use dynamic_chain or fewer hops for better speed.



### Security, privacy, and ethics
- Proxies can change your privacy posture. A proxy operator can see your unencrypted traffic and target hosts.
- Do not assume anonymity: misconfiguration or DNS leaks reveal identity.
- Scanning: only scan hosts you own or have explicit permission to scan. Unauthorized scanning may be illegal and unethical.
- Don’t overload proxies or the Tor network with scanning traffic — be a courteous netizen.



### Advanced notes (brief)
- Chaining multiple proxies increases complexity and latency; strict_chain ensures the path is exact but fragile.
- For stronger privacy, pair ProxyChains with encrypted transports (HTTPS, SSH tunnels) and secure DNS (DoH/DoT).
- For reproducible, isolated testing, consider using a disposable VM and dedicated proxies.



### Wrap-up
ProxyChains is a lightweight, powerful tool to route TCP traffic from applications through proxies. It’s great for testing, privacy experiments, and bypassing simple network restrictions, but has limits: it won’t magically proxy raw packets or fix every DNS leakage. When using it with nmap, prefer TCP connect scans (-sT) and always respect laws and targets. 